<body>
<canvas id="cav" style="background:black">
</canvas>
</body>
<script>
//参数区
var d=-300,
	f=-4,
	w=400,
	h=690;
var ol=0;
var ot=0;
//框架区
function p3d(x,y,z){
	this.x=x;
	this.y=y;
	this.z=z;
	this.rotateX=function (angle){
		var sinA=Math.sin(angle);
		var cosA=Math.cos(angle);
		var tz=this.z;
		var ty=this.y;
		this.y=ty*cosA-tz*sinA;
		this.z=ty*sinA+tz*cosA;
	};
	this.rotateY=function (angle){
		var sinA=Math.sin(angle);
		var cosA=Math.cos(angle);
		var tz=this.z;
		var tx=this.x;
		this.z=tz*cosA-tx*sinA;
		this.x=tz*sinA+tx*cosA;
	};
	this.rotateXY=function (a1,a2){
		this.rotateX(a1);
		this.rotateY(a2);
	};
}
function draw(p1,p2,con){
	dL(
		d*0.7*p1.y/(d+p1.z)+w/2,
		h*0.75-(d*0.7*(p1.x+f)/(d+p1.z)),
		d*0.7*p2.y/(d+p2.z)+w/2,
		h*0.75-(d*0.7*(p2.x+f)/(d+p2.z)),
		con
	);
	dL(
		d*0.7*p1.y/(d+p1.z)+w/2,
		h*0.25-(d*0.7*(p1.x-f)/(d+p1.z)),
		d*0.7*p2.y/(d+p2.z)+w/2,
		h*0.25-(d*0.7*(p2.x-f)/(d+p2.z)),
		con
	);
}
function dL(x1,y1,x2,y2,con){
	con.beginPath();
	con.moveTo(x1,y1);
	con.lineTo(x2,y2);
	con.closePath();
	con.stroke();
}
//画图区
var cav=document.getElementById("cav");
cav.width=w;
cav.height=h;
var con=cav.getContext("2d");
con.lineWidth=0.7;
	
var p0=new p3d(0,0,0);
var p1=new p3d(100,0,0);
var p2=new p3d(0,100,0);
var p3=new p3d(0,0,100);
paint();
function paint(){
con.fillStyle="black";
con.fillRect(0,0,w,h);
con.strokeStyle="#20FAAA";
draw(p0,p1,con);
draw(p0,p2,con);
draw(p0,p3,con);
}

//转动区
function drag(obj){
obj.touchstart = function(event){
event = event || window.event;
obj.setCapture&&obj.setCapture();
ol = event.touches[0].clientX;
ot = event.touches[0].clientY;
	
document.touchmove = function(event) {
event = event || window.event; 
var ax = (event.touches[0].clientX - ol)*0.1;
var ay = (event.touches[0].clientY - ot)*0.1; 
p1.rotateXY(ax,ay);
p2.rotateXY(ax,ay);
p3.rotateXY(ax,ay);
paint();
ol = event.touches[0].clientX;
ot = event.touches[0].clientY;
};
	
document.touchend = function() {
document.touchmove = null;
document.toucend = null; 
obj.releaseCapture && obj.releaseCapture(); 
};

};
}
window.onload = function(){
drag(cav);
}
</script>